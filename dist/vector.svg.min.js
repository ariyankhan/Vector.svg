!function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e):e.Vector=t(e)}("undefined"!=typeof window?window:this,function(e){"use strict";Object.defineProperty;var t=Object.defineProperties,n=Array.prototype.slice,r=(Array.prototype.splice,Math.max,Math.min,Object.create),o=function(e){return void 0===e||null===e},i=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)},l=function(e){return"function"==typeof e},u=function(e,t){if(void 0===e||null===e)throw new TypeError("setPrototypeOf called on null or undefined");if(null!==t&&!i(t))throw new TypeError("Object prototype may only be an Object or null: "+String(t));var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(void 0===n||!l(n.set))throw new TypeError("Object.prototype.__proto__ accessor property does not exist");return n.set.call(e,t),e},s=function(){var e=window.navigator.userAgent;return/MSIE/i.test(e)||/rv:11\.0/i.test(e)||/Edge/i.test(e)},h=function(e){};h.merge=function(e){if(o(e))throw new TypeError("Target object can't be null or undefined");e=Object(e);var n,r,i;for(n=1;n<arguments.length;++n)r=arguments[n],o(r)||(r=Object(r),i=Object.getOwnPropertyNames(r).reduce(function(e,t){return e[t]=Object.getOwnPropertyDescriptor(r,t),e},{}),t(e,i));return e},h.merge(h,{ns:{svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",ev:"http://www.w3.org/2001/xml-events",xhtml:"http://www.w3.org/1999/xhtml"},createElement:function(e){return document.createElementNS(h.ns.svg,e)},setAttribute:function(e,t,n,r){return void 0===n?this:(r=o(r)?null:r,e.setAttributeNS(r,t,n),this)},setAttributes:function(e,t,n){return Object.keys(t).forEach(function(r){h.setAttribute(e,r,t[r],n)}),this},uuid:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&o]+e[o>>8&255]+e[o>>16&255]+e[o>>24&255]}}(),unique:function(e){if(o(e))return[];e=Object(e);for(var t,r,l=n.call(e),u=[],s={},c=[],a=[],m=h.uuid(),f=l.length,d=0;d<f;++d)t=l[d],i(t)?Object.isExtensible(t)?void 0===t[m]&&(u.push(t),t[m]=!0,a.push(u.length-1)):-1===c.indexOf(t)&&(u.push(t),c.push(t)):void 0===s[r=void 0===t?"U":null===t?"I":"string"==typeof t?"S_"+t:"number"==typeof t?"N_"+t:"boolean"==typeof t?"B_"+t:t]&&(u.push(t),s[r]=!0);return a.forEach(function(e){delete u[e][m]}),u}});var c=h.Element=function(){this._domElement=null,this._events={}};h.merge(c.prototype,{attr:function(e){if(0===arguments.length){var t,n,r,o=this._domElement,i=0,l={};if(t=o.attributes,window.NamedNodeMap&&t instanceof window.NamedNodeMap)for(n=t.length;i<n;++i)null!==(r=t.item(i))&&(l[r.localName]=a(r.localName,r.value,r.namespaceURI));else Object.keys(t).forEach(function(e){l[e]=a(e,t[e],null)});return l}},byId:function(){},query:function(){},queryAll:function(){}});var a=function(e,t,n){e};h.merge(c.prototype,{binder:function(){},bind:function(){}}),h.merge(c.prototype,{on:function(e,t,r,o){if(null===this._domElement)return this;if(!l(t))throw new TypeError("EventListener is not callable");e=String(e),o=Boolean(o),r=arguments.length>=3?r:this;var i,u,s=this,h=0;if(i=this._events[e],u=function(){t.apply(r,n.call(arguments))},i){for(;h<i.length;++h)if(i[h].listener===t&&i[h].useCapture===o)return this}else i=this._events[e]=[];return i.push({listener:t,wrapperListener:u,useCapture:o}),this._domElement.addEventListener?this._domElement.addEventListener(e,u,o):this._domElement.attachEvent("on"+e,u),s},off:function(e,t,n){if(null===this._domElement)return this;var r=this._events,o=this;if(0===arguments.length)Object.keys(r).forEach(function(e){r[e].forEach(function(t){o._domElement.removeEventListener?o._domElement.removeEventListener(e,t.wrapperListener,t.useCapture):o._domElement.detachEvent("on"+e,t.wrapperListener)})}),this._events={};else if(1===arguments.length){if(e=String(e),!r[e])return o;r[e].forEach(function(t){o._domElement.removeEventListener?o._domElement.removeEventListener(e,t.wrapperListener,t.useCapture):o._domElement.detachEvent("on"+e,t.wrapperListener)}),delete r[e]}else{if(!l(t))throw new TypeError("EventListener is not callable");e=String(e),n=Boolean(n);var i,u=0;if(!(i=this._events[e]))return o;for(;u<i.length;++u)if(i[u].listener===t&&i[u].useCapture===n){o._domElement.removeEventListener?o._domElement.removeEventListener(e,i[u].wrapperListener,i[u].useCapture):o._domElement.detachEvent("on"+e,i[u].wrapperListener),i.splice(u,1);break}0===i.length&&delete r[e]}return o},once:function(e,t,r,o){if(null===this._domElement)return this;if(!l(t))throw new TypeError("EventListener is not callable");e=String(e),o=Boolean(o),r=arguments.length>=3?r:this;var i,u,s=this,h=0;if(i=this._events[e],u=function(){t.apply(r,n.call(arguments)),s.off(e,t,o)},i){for(;h<i.length;++h)if(i[h].listener===t&&i[h].useCapture===o)return this}else i=this._events[e]=[];return i.push({listener:t,wrapperListener:u,useCapture:o}),this._domElement.addEventListener?this._domElement.addEventListener(e,u,o):this._domElement.attachEvent("on"+e,u),s},emit:function(e,t,n){if(null===this._domElement)return this;e=String(e),n=Boolean(n);var r;return l(window.CustomEvent)?r=new window.CustomEvent(e,{detail:t,bubbles:n,cancelable:!0}):l(document.createEvent)?(r=document.createEvent("CustomEvent")).initCustomEvent(e,n,!0,t):(r=document.createEventObject()).detail=t,l(this._domElement.dispatchEvent)?this._domElement.dispatchEvent(r):this._domElement.fireEvent("on"+e,r),this},focus:function(){if(null===this._domElement)return this;this._domElement.focus()},blur:function(){if(null===this._domElement)return this;this._domElement.blur()},focusin:function(){if(null===this._domElement)return this;this._domElement.focus()},focuseout:function(){if(null===this._domElement)return this;this._domElement.blur()},click:function(){return null===this._domElement?this:(f(this,"click"),this)},dblclick:function(){return null===this._domElement?this:(f(this,"dblclick"),this)},mousedown:function(){return null===this._domElement?this:(f(this,"mousedown"),this)},mouseup:function(){return null===this._domElement?this:(f(this,"mouseup"),this)},mousemove:function(){return null===this._domElement?this:(f(this,"mousemove"),this)},mouseout:function(){return null===this._domElement?this:(f(this,"mouseout"),this)},mouseover:function(){return null===this._domElement?this:(f(this,"mouseover"),this)},mouseenter:function(){return null===this._domElement?this:(f(this,"mouseenter"),this)},mouseleave:function(){return null===this._domElement?this:(f(this,"mouseleave"),this)},keydown:function(){return null===this._domElement?this:(p(this,"keydown"),this)},keypress:function(){return null===this._domElement?this:(p(this,"keypress"),this)},keyup:function(){return null===this._domElement?this:(p(this,"keyup"),this)},onclick:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onclick",e,t)},ondblclick:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondblclick",e,t)},onmousedown:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmousedown",e,t)},onmousemove:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmousemove",e,t)},onmouseout:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmouseout",e,t)},onmouseover:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmouseover",e,t)},onmouseup:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmouseup",e,t)},onmouseenter:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmouseenter",e,t)},onmouseleave:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmouseleave",e,t)},ontouchstart:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ontouchstart",e,t)},ontouchend:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ontouchend",e,t)},ontouchmove:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ontouchmove",e,t)},ontouchcancel:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ontouchcancel",e,t)},ondrag:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondrag",e,t)},ondragend:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondragend",e,t)},ondragenter:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondragenter",e,t)},ondragleave:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondragleave",e,t)},ondragover:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondragover",e,t)},ondragstart:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"oondragstart",e,t)},ondrop:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondrop",e,t)},onblur:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onblur",e,t)},onfocus:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onfocus",e,t)},oncontextmenu:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"oncontextmenu",e,t)},onkeydown:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onkeydown",e,t)},onkeypress:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onkeypress",e,t)},onkeyup:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onkeyup",e,t)}});var m=function(e){var t;return l(window.MouseEvent)?t=new window.MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,buttons:0,relatedTarget:null,region:null}):l(document.createEvent)?(t=document.createEvent("MouseEvent")).initMouseEvent(e,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):t=document.createEventObject(),t},f=function(e,t){var n=m(t);l(e._domElement.dispatchEvent)?e._domElement.dispatchEvent(n):e._domElement.fireEvent("on"+t,n)},d=function(e){var t;return l(window.KeyboardEvent)?t=new window.KeyboardEvent(e,{bubbles:!0,cancelable:!0,view:window,detail:0,key:"",code:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,repeat:!1,isComposing:!1,charCode:0,keyCode:0,which:0}):document.createEvent?(t=document.createEvent("KeyboardEvent"),l(t.initKeyboardEvent)?s()?t.initKeyboardEvent(e,!0,!0,window,"",0,"",!1,""):t.initKeyboardEvent(e,!0,!0,window):t.initKeyEvent(e,!0,!0,window,!1,!1,!1,!1,0,0)):t=document.createEventObject(),t},p=function(e,t){var n=d(t);l(e._domElement.dispatchEvent)?e._domElement.dispatchEvent(n):e._domElement.fireEvent("on"+t,n)},E=function(e,t,n,r){var o;return null===n?(e._domElement[t]=null,e):l(n)?(o=n.bind(r),o._listener=n,e._domElement[t]=o,e):(o=e._domElement[t],l(o)&&l(o._listener)?o._listener:null)},w=h.Graphics=function(){c.apply(this,n.call(arguments))};u(w,c),w.prototype=r(c.prototype),w.prototype.constructor=w;var v=h.Geometry=function(){w.apply(this,n.call(arguments))};u(v,w),v.prototype=r(w.prototype),v.prototype.constructor=v;var y=h.Rect=function(e,t,n,r,o,i){v.apply(this,[]);var l=h.createElement(this.tag);h.setAttributes(l,{width:e,height:t,x:n,y:r,rx:o,ry:i},null),this._domElement=l,l._wrappingElement=this};return u(y,v),y.prototype=Object.create(v.prototype),y.prototype.constructor=y,h.merge(y.prototype,{tag:"rect"}),h});