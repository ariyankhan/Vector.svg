!function(t,e){"use strict";"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t):t.Vector=e(t)}("undefined"!=typeof window?window:this,function(t){"use strict";Object.defineProperty;var e=Object.defineProperties,n=Array.prototype.slice,r=(Array.prototype.map,Array.prototype.splice,Math.floor),i=Array.prototype.reduce,o="http://www.w3.org/2000/svg",l=t,s=t.document,u=Array.isArray,a=Math.max,h=(Math.min,Object.create),c=function(t){return void 0===t||null===t},p=function(t){return null!==t&&("object"==typeof t||"function"==typeof t)},f=function(t){return"function"==typeof t},d=function(t,e){if(void 0===t||null===t)throw new TypeError("setPrototypeOf called on null or undefined");if(null!==e&&!p(e))throw new TypeError("Object prototype may only be an Object or null: "+String(e));var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(void 0===n||!f(n.set))throw new TypeError("Object.prototype.__proto__ accessor property does not exist");return n.set.call(t,e),t},m=function(){var t=l.navigator.userAgent;return/MSIE/i.test(t)||/rv:11\.0/i.test(t)||/Edge/i.test(t)},g=function(){var t=l.navigator.userAgent;return/Firefox/i.test(t)&&/Mozilla/i.test(t)},y={tokenSeparator:/\s+/,pointSeparator:/[,\s]+/,trimStartPointString:/^[,\s]+/,trimEndPointString:/[,\s]+$/,referenceAttrVal:/^url\(#(.+)\)$/,hrefAttrVal:/^#(.+)$/},v=function t(e,n,r){var i;return n=c(n)?"100%":n,r=c(r)?"100%":r,e instanceof Y?e.size(n,r):e instanceof l.SVGSVGElement?new Y(n,r,e):e instanceof l.HTMLElement?(i=new Y(n,r),e.appendChild(i._domElement),i):"string"==typeof e?t(s.getElementById(e),n,r):new Y(n,r)};v.merge=function(t){if(c(t))throw new TypeError("Target object can't be null or undefined");var n,r,i;for(t=Object(t),n=1;n<arguments.length;++n)r=arguments[n],c(r)||(r=Object(r),i=Object.getOwnPropertyNames(r).reduce(function(t,e){return t[e]=Object.getOwnPropertyDescriptor(r,e),t},{}),e(t,i));return t},v.merge(v,{ns:{svg:o,xlink:"http://www.w3.org/1999/xlink",ev:"http://www.w3.org/2001/xml-events",xhtml:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/2000/xmlns/"},createElement:function(t){return s.createElementNS(v.ns.svg,t)},setAttribute:function(t,e,n,r){return r=c(r)?null:r,t.setAttributeNS(r,e,n),this},setAttributes:function(t,e,n){return Object.keys(e).forEach(function(r){v.setAttribute(t,r,e[r],n)}),this},hasAttribute:function(t,e,n){return n=c(n)?null:n,t.hasAttributeNS(n,e)},getAttribute:function(t,e,n){return n=c(n)?null:n,t.getAttributeNS(n,e)},removeAttribute:function(t,e,n){return n=c(n)?null:n,t.removeAttributeNS(n,e),this},uuid:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]}}(),unique:function(t){if(c(t))return[];for(var e,n,r=Object(t),i=[],o={},l=[],s=[],u=v.uuid(),a=v.toIntLength(r.length),h=0;h<a;++h)e=r[h],p(e)?Object.isExtensible(e)?void 0===e[u]&&(i.push(e),e[u]=!0,s.push(i.length-1)):-1===l.indexOf(e)&&(i.push(e),l.push(e)):void 0===o[n=void 0===e?"U":null===e?"I":"string"==typeof e?"S_"+e:"number"==typeof e?"N_"+e:"boolean"==typeof e?"B_"+e:e]&&(i.push(e),o[n]=!0);return s.forEach(function(t){delete i[t][u]}),i},wrap:function(t){if(!(t instanceof l.SVGElement))return null;if(v.isWrapped(t))return t._wrappingElement;switch(t.constructor){case l.SVGRectElement:return new K(void 0,void 0,void 0,void 0,void 0,void 0,t);case l.SVGCircleElement:return new D(void 0,void 0,void 0,t);case l.SVGPolylineElement:return new R(void 0,t);case l.SVGPolygonElement:return new z(void 0,t);case l.SVGLineElement:return new H(void 0,void 0,void 0,void 0,t);case l.SVGEllipseElement:return new U(void 0,void 0,void 0,void 0,t);case l.SVGPathElement:return new W(void 0,t);case l.SVGSVGElement:return new q(void 0,void 0,void 0,void 0,t);case l.SVGGElement:return new $(t);case l.SVGDefsElement:return new X(t);case l.SVGSymbolElement:return new J(t);case l.SVGUseElement:return new Q(void 0,void 0,void 0,void 0,void 0,t);default:return new A(t)}},isWrapped:function(t){if(!p(t))return!1;var e=t._wrappingElement;return e instanceof A&&t instanceof e.constructor.domInterface&&e._domElement===t},toIntLength:function(t){return t=Number(t),t=isNaN(t)?0:t,t=a(0,t),t=r(t)},unHoles:function(t){return c(t)?[]:(t=Object(t),i.call(t,function(t,e){return t.push(e),t},[]))},points:function(t){if(c(t))return[];var e,n,i,o,l=[],s=0;for(e=(t=(t=String(t)).replace(y.trimStartPointString,"").replace(y.trimEndPointString,"")).split(y.pointSeparator),n=2*r(e.length/2);s<n;s+=2)i=+(i=e[s]),o=+(o=e[s+1]),isFinite(i)&&isFinite(o)&&l.push({x:i,y:o});return l},pointString:function(t){return p(t)||(t=v.points(t)),i.call(t,function(t,e){if(!p(e))return t;var n=e.x,r=e.y;return n=+String(n),r=+String(r),isFinite(n)&&isFinite(r)?(t.push(n+","+r),t):t},[]).join(" ")},isIEOrEdgeBrowser:m,isFirefox:g,distance:function(t,e,n,r){return t=+t,e=+e,n=+n,r=+r,isFinite(t)||(t=0),isFinite(e)||(e=0),isFinite(n)||(n=0),isFinite(r)||(r=0),Math.pow(Math.pow(t-n,2)+Math.pow(e-r,2),.5)},svgSupported:f(l.SVGElement)&&f(s.createElementNS)&&s.createElementNS(o,"svg")instanceof l.SVGElement});var E=function(){};E.prototype.exports={},v.merge(E,{makeInheritance:function(t){v.merge(t.prototype,this.prototype.exports)}}),v.merge(E.prototype.exports,{});var w=function(){};d(w,E),(w.prototype=Object.create(E.prototype)).constructor=w,w.prototype.exports={},v.merge(w.prototype.exports,{rect:function(t,e,n,r,i,o){var l=new K(t,e,n,r,i,o);return this.node().appendChild(l.node()),l},circle:function(t,e,n){var r=new D(t,e,n);return this.node().appendChild(r.node()),r},ellipse:function(t,e,n,r){var i=new U(t,e,n,r);return this.node().appendChild(i.node()),i},line:function(t,e,n,r){var i=new H(t,e,n,r);return this.node().appendChild(i.node()),i},path:function(t){var e=new W(t);return this.node().appendChild(e.node()),e},polygon:function(t){var e=new z(t);return this.node().appendChild(e.node()),e},polyline:function(t){var e=new R(t);return this.node().appendChild(e.node()),e}});var b=function(){};d(b,E),(b.prototype=Object.create(E.prototype)).constructor=b,b.prototype.exports={},v.merge(b.prototype.exports,{g:function(){var t=new $;return this.node().appendChild(t.node()),t},svg:function(t,e,n,r){var i=new q(t,e,n,r);return this.node().appendChild(i.node()),i},symbol:function(){var t=new J;return this.node().appendChild(t.node()),t},use:function(t,e,n,r,i){var o=new Q(t,e,n,r,i);return this.node().appendChild(o.node()),o}});var _=function(){};d(_,E),(_.prototype=Object.create(E.prototype)).constructor=_,_.prototype.exports={},v.merge(_.prototype.exports,{element:function(t){var e=new A(v.createElement(t));return this.node().appendChild(e.node()),e}});var A=v.Element=function(t){if(t instanceof this.constructor.domInterface){if(v.isWrapped(t)&&t._wrappingElement instanceof this.constructor)return t._wrappingElement}else t=null!==this.tag?v.createElement(this.tag):null;this._domElement=t,this._events={},this._binder=null,null!==t&&(t._wrappingElement=this)};v.merge(A,{domInterface:l.SVGElement}),v.merge(A.prototype,{tag:null,_defaultAttrValues:{fill:"#000","fill-opacity":"1",stroke:"#000","stroke-width":"0","stroke-opacity":"1","stroke-linecap":"butt","stroke-linejoin":"miter",opacity:"1","font-size":"16","font-family":"sans-serif","text-anchor":"start","stop-color":"#000","stop-opacity":"1",offset:"0"},_setAttrGetterSetter:function(t,e){return void 0===e?this.attr(t):this.attr(t,e)},attr:function(t){var e,n,r,i,o,s,a,h,f=this,d=this._domElement,m=0;if(0===arguments.length){if(h={},i=d.attributes,l.NamedNodeMap&&i instanceof l.NamedNodeMap)for(o=i.length,m=0;m<o;++m)null!==(s=i.item(m))&&(h[s.localName]=x(s.localName,s.value,s.namespaceURI));else Object.keys(i).forEach(function(t){h[t]=x(t,i[t],null)});return h}return 1===arguments.length?(e=arguments[0],u(e)?f.attr(e,null):p(e)?f.attr(e,null):(s=String(e),v.hasAttribute(d,s,null)?x(s,v.getAttribute(d,s,null),null):void 0!==(a=f._defaultAttrValues[s])?x(s,a,null):null)):2===arguments.length?(e=arguments[0],n=arguments[1],u(e)?(n=c(n)?null:n,e.reduce(function(t,e){var r;return e=String(e),r=v.hasAttribute(d,e,n)?x(e,v.getAttribute(d,e,n),n):null===n&&void 0!==(a=f._defaultAttrValues[e])?x(e,a,null):null,t[e]=r,t},{})):p(e)?(n=c(n)?null:n,Object.keys(e).forEach(function(t){var r=e[t];void 0===r||(null===r?v.removeAttribute(d,t,n):v.setAttribute(d,t,S(t,r,n),n))}),f):f.attr(String(e),n,null)):arguments.length>=3?(e=arguments[0],n=arguments[1],r=arguments[2],u(e)?f.attr(e,n):p(e)?f.attr(e,n):(r=c(r)?null:r,a=String(e),null===n?v.removeAttribute(d,a,r):void 0===n||v.setAttribute(d,a,S(a,n,r),r),f)):void 0},css:function(){},font:function(t){var e,n=["font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight"],r=["family","size","adjust","stretch","style","variant","weight"],i=0;n.length;return null===t?this.attr(n.reduce(function(t,e){return t[e]=null,t},{})):p(t)?(i=0,this.attr(n.reduce(function(e,n){var o=t[r[i]];return i++,void 0!==o&&(e[n]=o),e},{}))):(e=this.attr(n),i=0,r.reduce(function(t,r){return t[r]=e[n[i]],i++,t},{}))},node:function(){return this._domElement},doc:function(){for(var t=this.node();null!==t;){if(t instanceof l.SVGSVGElement&&t.parentNode instanceof l.HTMLElement)return new Y(void 0,void 0,t);t=t.parentNode}return null},id:function(t){var e=this.node();return 0===arguments.length?(""===e.id&&(e.id=this._generateElemId()),e.id):(e.id=t,this)},_generateElemId:function(){return v.uuid()}}),E.makeInheritance(A),_.makeInheritance(A);var x=function(t,e,n){var r,i,o;switch(t=String(t),e=String(e),n=c(n)?null:n,t){case"class":return null!==n?e:v.unique(e.trim().split(y.tokenSeparator));case"mask":case"clip-path":case"fill":case"stroke":return null!==n?e:(r=y.referenceAttrVal.exec(e))?(o=s.getElementById(r[1]),v.isWrapped(o)?o._wrappingElement:e):e;case"href":return(r=y.hrefAttrVal.exec(e))?(o=s.getElementById(r[1]),v.isWrapped(o)?o._wrappingElement:e):e;case"cx":case"cy":case"font-size":case"font-weight":case"height":case"r":case"rx":case"ry":case"stroke-dasharray":case"stroke-dashoffset":case"stroke-width":case"width":case"x":case"x1":case"x2":case"y":case"y1":case"y2":case"pathLength":return null!==n?e:(i=+e,isFinite(i)?i:e);default:return e}},S=function(t,e,n){if(t=String(t),n=c(n)?null:n,!p(e))return String(e);switch(t){case"class":return null!==n?e.toString():v.unHoles(e).join(" ").trim();case"mask":default:return e.toString()}};v.merge(A.prototype,{on:function(t,e,r,i){if(null===this._domElement)return this;if(!f(e))throw new TypeError("EventListener is not callable");t=String(t),i=Boolean(i),r=arguments.length>=3?r:this;var o,l,s=0;if(l=function(){e.apply(r,n.call(arguments))},o=this._events[t]){for(;s<o.length;++s)if(o[s].listener===e&&o[s].useCapture===i)return this}else o=this._events[t]=[];return o.push({listener:e,wrapperListener:l,useCapture:i}),this._domElement.addEventListener?this._domElement.addEventListener(t,l,i):this._domElement.attachEvent("on"+t,l),this},off:function(t,e,n){if(null===this._domElement)return this;var r=this._events,i=this;if(0===arguments.length)Object.keys(r).forEach(function(t){r[t].forEach(function(e){i._domElement.removeEventListener?i._domElement.removeEventListener(t,e.wrapperListener,e.useCapture):i._domElement.detachEvent("on"+t,e.wrapperListener)})}),this._events={};else if(1===arguments.length){if(t=String(t),!r[t])return i;r[t].forEach(function(e){i._domElement.removeEventListener?i._domElement.removeEventListener(t,e.wrapperListener,e.useCapture):i._domElement.detachEvent("on"+t,e.wrapperListener)}),delete r[t]}else{if(!f(e))throw new TypeError("EventListener is not callable");t=String(t),n=Boolean(n);var o,l=0;if(!(o=this._events[t]))return i;for(;l<o.length;++l)if(o[l].listener===e&&o[l].useCapture===n){i._domElement.removeEventListener?i._domElement.removeEventListener(t,o[l].wrapperListener,o[l].useCapture):i._domElement.detachEvent("on"+t,o[l].wrapperListener),o.splice(l,1);break}0===o.length&&delete r[t]}return i},once:function(t,e,r,i){if(null===this._domElement)return this;if(!f(e))throw new TypeError("EventListener is not callable");t=String(t),i=Boolean(i),r=arguments.length>=3?r:this;var o,l,s=this,u=0;if(l=function(){e.apply(r,n.call(arguments)),s.off(t,e,i)},o=this._events[t]){for(;u<o.length;++u)if(o[u].listener===e&&o[u].useCapture===i)return this}else o=this._events[t]=[];return o.push({listener:e,wrapperListener:l,useCapture:i}),this._domElement.addEventListener?this._domElement.addEventListener(t,l,i):this._domElement.attachEvent("on"+t,l),s},emit:function(t,e,n){return null===this._domElement?this:(t=String(t),n=Boolean(n),f(l.CustomEvent)?r=new l.CustomEvent(t,{detail:e,bubbles:n,cancelable:!0}):f(s.createEvent)?(r=s.createEvent("CustomEvent")).initCustomEvent(t,n,!0,e):(r=s.createEventObject()).detail=e,f(this._domElement.dispatchEvent)?this._domElement.dispatchEvent(r):this._domElement.fireEvent("on"+t,r),this);var r},focus:function(){if(null===this._domElement)return this;this._domElement.focus()},blur:function(){if(null===this._domElement)return this;this._domElement.blur()},focusin:function(){if(null===this._domElement)return this;this._domElement.focus()},focuseout:function(){if(null===this._domElement)return this;this._domElement.blur()},click:function(){return null===this._domElement?this:(V(this,"click"),this)},dblclick:function(){return null===this._domElement?this:(V(this,"dblclick"),this)},mousedown:function(){return null===this._domElement?this:(V(this,"mousedown"),this)},mouseup:function(){return null===this._domElement?this:(V(this,"mouseup"),this)},mousemove:function(){return null===this._domElement?this:(V(this,"mousemove"),this)},mouseout:function(){return null===this._domElement?this:(V(this,"mouseout"),this)},mouseover:function(){return null===this._domElement?this:(V(this,"mouseover"),this)},mouseenter:function(){return null===this._domElement?this:(V(this,"mouseenter"),this)},mouseleave:function(){return null===this._domElement?this:(V(this,"mouseleave"),this)},keydown:function(){return null===this._domElement?this:(G(this,"keydown"),this)},keypress:function(){return null===this._domElement?this:(G(this,"keypress"),this)},keyup:function(){return null===this._domElement?this:(G(this,"keyup"),this)},onclick:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onclick",t,e)},ondblclick:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ondblclick",t,e)},onmousedown:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onmousedown",t,e)},onmousemove:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onmousemove",t,e)},onmouseout:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onmouseout",t,e)},onmouseover:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onmouseover",t,e)},onmouseup:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onmouseup",t,e)},onmouseenter:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onmouseenter",t,e)},onmouseleave:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onmouseleave",t,e)},ontouchstart:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ontouchstart",t,e)},ontouchend:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ontouchend",t,e)},ontouchmove:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ontouchmove",t,e)},ontouchcancel:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ontouchcancel",t,e)},ondrag:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ondrag",t,e)},ondragend:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ondragend",t,e)},ondragenter:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ondragenter",t,e)},ondragleave:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ondragleave",t,e)},ondragover:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ondragover",t,e)},ondragstart:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ondragstart",t,e)},ondrop:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"ondrop",t,e)},onblur:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onblur",t,e)},onfocus:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onfocus",t,e)},oncontextmenu:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"oncontextmenu",t,e)},onkeydown:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onkeydown",t,e)},onkeypress:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onkeypress",t,e)},onkeyup:function(t,e){if(arguments.length>=1&&null!==t&&!f(t))throw new TypeError("Listener is not null or callable");return e=arguments.length>=2?e:this,L(this,"onkeyup",t,e)}});var V=function(t,e){var n,r,i=(n=e,f(l.MouseEvent)?r=new l.MouseEvent(n,{bubbles:!0,cancelable:!0,view:l,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,buttons:0,relatedTarget:null,region:null}):f(s.createEvent)?(r=s.createEvent("MouseEvent")).initMouseEvent(n,!0,!0,l,0,0,0,0,0,!1,!1,!1,!1,0,null):r=s.createEventObject(),r);f(t._domElement.dispatchEvent)?t._domElement.dispatchEvent(i):t._domElement.fireEvent("on"+e,i)},G=function(t,e){var n,r,i=(n=e,f(l.KeyboardEvent)?r=new l.KeyboardEvent(n,{bubbles:!0,cancelable:!0,view:l,detail:0,key:"",code:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,repeat:!1,isComposing:!1,charCode:0,keyCode:0,which:0}):s.createEvent?(r=s.createEvent("KeyboardEvent"),f(r.initKeyboardEvent)?m()?r.initKeyboardEvent(n,!0,!0,l,"",0,"",!1,""):r.initKeyboardEvent(n,!0,!0,l):r.initKeyEvent(n,!0,!0,l,!1,!1,!1,!1,0,0)):r=s.createEventObject(),r);f(t._domElement.dispatchEvent)?t._domElement.dispatchEvent(i):t._domElement.fireEvent("on"+e,i)},L=function(t,e,n,r){var i;return null===n?(t._domElement[e]=null,t):f(n)?((i=n.bind(r))._listener=n,t._domElement[e]=i,t):(i=t._domElement[e],f(i)&&f(i._listener)?i._listener:null)};v.merge(A.prototype,{children:function(){var t,e,n,r=[],i=0;for(t=(n=this._domElement.childNodes).length;i<t;++i)(e=n.item(i))instanceof l.SVGElement&&r.push(v.wrap(e));return r},insert:function(t,e){if(!(t instanceof A))return this;if(c(e))return this.append(t);var n=this.children();return 0===n.length?this.append(t):(e=+e,e=isNaN(e)?0:e,e=a(0,e),(e=r(e))>=n.length?this.append(t):(this.node().insertBefore(t.node(),n[e].node()),this))},append:function(t){return t instanceof A?(this.node().appendChild(t.node()),this):this},remove:function(t){if(t instanceof A)this.node().removeChild(t.node());else if("number"==typeof t)return this.remove(this.children()[t]);return this},has:function(t){if(!(t instanceof A))return!1;for(var e=this.children(),n=e.length,r=0;r<n;++r)if(e[r].node()===t.node())return!0;return!1},replace:function(t,e){return t instanceof A&&e instanceof A?(this.node().replaceChild(t.node(),e.node()),this):this},textContent:function(t){return void 0===t?this.node().textContent:(this.node().textContent=t,this)},byId:function(){},query:function(){},queryAll:function(){}});var k=v.Graphics=function(t){var e=A.call(this,t);if(e)return e};d(k,A),k.prototype=h(A.prototype),k.prototype.constructor=k,v.merge(k,{domInterface:l.SVGElement}),v.merge(k.prototype,{tag:null,_defaultAttrValues:v.merge(v.merge({},k.prototype._defaultAttrValues),{})});var I=v.Geometry=function(t){var e=k.call(this,t);if(e)return e};d(I,k),I.prototype=h(k.prototype),I.prototype.constructor=I,v.merge(I,{domInterface:l.SVGElement}),v.merge(I.prototype,{tag:null,_defaultAttrValues:v.merge(v.merge({},I.prototype._defaultAttrValues),{pathLength:"0"}),pathLength:function(t){return this._setAttrGetterSetter("pathLength",t)},length:function(){var t=this._domElement;switch(t.constructor){case W.domInterface:return T(t);case K.domInterface:return j(t);case D.domInterface:return F(t);case U.domInterface:return B(t);case H.domInterface:return C(t);case R.domInterface:return N(t);case z.domInterface:return P(t);default:return 0}}});var T=function(t){return t.getTotalLength()},j=function(t){var e,n,r;if(f(t.getTotalLength))return t.getTotalLength();if(g()){if(v.hasAttribute(t,"width",null)&&v.hasAttribute(t,"height",null)&&(n=parseFloat(v.getAttribute(t,"width",null)),r=parseFloat(v.getAttribute(t,"height",null)),isFinite(n)&&n>0&&isFinite(r)&&r>0&&f(t.getBBox)))return 2*((e=t.getBBox()).width+e.height)}else if(f(t.getBBox))return 2*((e=t.getBBox()).width+e.height);return n=v.hasAttribute(t,"width",null)?v.getAttribute(t,"width",null):0,r=v.hasAttribute(t,"height",null)?v.getAttribute(t,"height",null):0,n=parseFloat(n),r=parseFloat(r),isFinite(n)&&n>=0||(n=0),isFinite(r)&&r>=0||(r=0),2*(n+r)},F=function(t){var e;return f(t.getTotalLength)?t.getTotalLength():f(t.getBBox)?(e=t.getBBox().width/2,2*Math.PI*e):(e=v.hasAttribute(t,"r",null)?v.getAttribute(t,"r",null):0,e=parseFloat(e),isFinite(e)&&e>=0||(e=0),2*Math.PI*e)},B=function(t){var e,n,r;if(f(t.getTotalLength))return t.getTotalLength();if(g()){if(v.hasAttribute(t,"rx",null)&&v.hasAttribute(t,"ry",null)&&(n=parseFloat(v.getAttribute(t,"rx",null)),r=parseFloat(v.getAttribute(t,"ry",null)),isFinite(n)&&n>0&&isFinite(r)&&r>0&&f(t.getBBox)))return e=t.getBBox(),O(e.width/2,e.height/2)}else if(f(t.getBBox))return e=t.getBBox(),O(e.width/2,e.height/2);return n=v.hasAttribute(t,"rx",null)?v.getAttribute(t,"rx",null):0,r=v.hasAttribute(t,"ry",null)?v.getAttribute(t,"ry",null):0,n=parseFloat(n),r=parseFloat(r),isFinite(n)&&n>=0||(n=0),isFinite(r)&&r>=0||(r=0),O(n,r)},O=function(t,e){if(0===t&&0===e)return 0;var n=Math.pow(t-e,2)/Math.pow(t+e,2);return Math.PI*(t+e)*(1+3*n/(10+Math.pow(4-3*n,.5)))},C=function(t){var e,n,r,i,o;return f(t.getTotalLength)?t.getTotalLength():f(t.getBBox)?(e=t.getBBox(),M(e.width,e.height)):(n=v.hasAttribute(t,"x1",null)?v.getAttribute(t,"x1",null):0,r=v.hasAttribute(t,"y1",null)?v.getAttribute(t,"y1",null):0,i=v.hasAttribute(t,"x2",null)?v.getAttribute(t,"x2",null):0,o=v.hasAttribute(t,"y2",null)?v.getAttribute(t,"y2",null):0,n=parseFloat(n),r=parseFloat(r),i=parseFloat(i),o=parseFloat(o),isFinite(n)||(n=0),isFinite(r)||(r=0),isFinite(i)||(i=0),isFinite(o)||(o=0),v.distance(n,r,i,o))},M=function(t,e){return Math.pow(t*t+e*e,.5)},N=function(t){var e,n=0;return f(t.getTotalLength)?t.getTotalLength():(e=v.hasAttribute(t,"points",null)?v.getAttribute(t,"points",null):"",0===(e=v.points(e)).length?0:(e.reduce(function(t,e){return n+=v.distance(t.x,t.y,e.x,e.y),e}),n))},P=function(t){var e,n=0;return f(t.getTotalLength)?t.getTotalLength():(e=v.hasAttribute(t,"points",null)?v.getAttribute(t,"points",null):"",0===(e=v.points(e)).length?0:(e.push(e[0]),e.reduce(function(t,e){return n+=v.distance(t.x,t.y,e.x,e.y),e}),n))},K=v.Rect=function(t,e,n,r,i,o,l){var s=I.call(this,l),u={width:t,height:e,x:n,y:r,rx:i,ry:o};if(s)return s.attr(u,null),s;this.attr(u,null)};d(K,I),K.prototype=Object.create(I.prototype),K.prototype.constructor=K,v.merge(K,{domInterface:l.SVGRectElement}),v.merge(K.prototype,{tag:"rect",_defaultAttrValues:v.merge(v.merge({},K.prototype._defaultAttrValues),{width:"0",height:"0",x:"0",y:"0",rx:"0",ry:"0"}),width:function(t){return this._setAttrGetterSetter("width",t)},height:function(t){return this._setAttrGetterSetter("height",t)},x:function(t){return this._setAttrGetterSetter("x",t)},y:function(t){return this._setAttrGetterSetter("y",t)},rx:function(t){return this._setAttrGetterSetter("rx",t)},ry:function(t){return this._setAttrGetterSetter("ry",t)},size:function(t,e){return void 0===t&&void 0===e?{width:this.width(),height:this.height()}:(void 0!==t&&this.width(t),void 0!==e&&this.height(e),this)}});var D=v.Circle=function(t,e,n,r){var i=I.call(this,r),o={r:t,cx:e,cy:n};if(i)return i.attr(o,null),i;this.attr(o,null)};d(D,I),D.prototype=Object.create(I.prototype),D.prototype.constructor=D,v.merge(D,{domInterface:l.SVGCircleElement}),v.merge(D.prototype,{tag:"circle",_defaultAttrValues:v.merge(v.merge({},D.prototype._defaultAttrValues),{r:"0",cx:"0",cy:"0"}),r:function(t){return this._setAttrGetterSetter("r",t)},cx:function(t){return this._setAttrGetterSetter("cx",t)},cy:function(t){return this._setAttrGetterSetter("cy",t)}});var R=v.Polyline=function(t,e){var n=I.call(this,e),r={points:t};if(n)return n.attr(r,null),n;this.attr(r,null)};d(R,I),R.prototype=Object.create(I.prototype),R.prototype.constructor=R,v.merge(R,{domInterface:l.SVGPolylineElement}),v.merge(R.prototype,{tag:"polyline",_defaultAttrValues:v.merge(v.merge({},R.prototype._defaultAttrValues),{points:""}),points:function(t){return this._setAttrGetterSetter("points",t)}});var z=v.Polygon=function(t,e){var n=I.call(this,e),r={points:t};if(n)return n.attr(r,null),n;this.attr(r,null)};d(z,I),z.prototype=Object.create(I.prototype),z.prototype.constructor=z,v.merge(z,{domInterface:l.SVGPolygonElement}),v.merge(z.prototype,{tag:"polygon",_defaultAttrValues:v.merge(v.merge({},z.prototype._defaultAttrValues),{points:""}),points:function(t){return this._setAttrGetterSetter("points",t)}});var H=v.Line=function(t,e,n,r,i){var o=I.call(this,i),l={x1:t,y1:e,x2:n,y2:r};if(o)return o.attr(l,null),o;this.attr(l,null)};d(H,I),H.prototype=Object.create(I.prototype),H.prototype.constructor=H,v.merge(H,{domInterface:l.SVGLineElement}),v.merge(H.prototype,{tag:"line",_defaultAttrValues:v.merge(v.merge({},H.prototype._defaultAttrValues),{x1:"0",y1:"0",x2:"0",y2:"0"}),x1:function(t){return this._setAttrGetterSetter("x1",t)},y1:function(t){return this._setAttrGetterSetter("y1",t)},x2:function(t){return this._setAttrGetterSetter("x2",t)},y2:function(t){return this._setAttrGetterSetter("y2",t)},from:function(t,e){return void 0===t&&void 0===e?{x:this.x1(),y:this.y1()}:(void 0!==t&&this.x1(t),void 0!==e&&this.y1(e),this)},to:function(t,e){return void 0===t&&void 0===e?{x:this.x2(),y:this.y2()}:(void 0!==t&&this.x2(t),void 0!==e&&this.y2(e),this)}});var U=v.Ellipse=function(t,e,n,r,i){var o=I.call(this,i),l={rx:t,ry:e,cx:n,cy:r};if(o)return o.attr(l,null),o;this.attr(l,null)};d(U,I),U.prototype=Object.create(I.prototype),U.prototype.constructor=U,v.merge(U,{domInterface:l.SVGEllipseElement}),v.merge(U.prototype,{tag:"ellipse",_defaultAttrValues:v.merge(v.merge({},U.prototype._defaultAttrValues),{rx:"0",ry:"0",cx:"0",cy:"0"}),rx:function(t){return this._setAttrGetterSetter("rx",t)},ry:function(t){return this._setAttrGetterSetter("ry",t)},cx:function(t){return this._setAttrGetterSetter("cx",t)},cy:function(t){return this._setAttrGetterSetter("cy",t)}});var W=v.Path=function(t,e){var n=I.call(this,e),r={d:t};if(n)return n.attr(r,null),n;this.attr(r,null)};d(W,I),W.prototype=Object.create(I.prototype),W.prototype.constructor=W,v.merge(W,{domInterface:l.SVGPathElement}),v.merge(W.prototype,{tag:"path",_defaultAttrValues:v.merge(v.merge({},W.prototype._defaultAttrValues),{d:""}),d:function(t){return this._setAttrGetterSetter("d",t)}});var q=v.SVG=function(t,e,n,r,i){var o=k.call(this,i),l={width:t,height:e,x:n,y:r};if(o)return o.attr(l,null),o;this.attr(l,null)};d(q,k),q.prototype=Object.create(k.prototype),q.prototype.constructor=q,v.merge(q,{domInterface:l.SVGSVGElement}),v.merge(q.prototype,{tag:"svg",_defaultAttrValues:v.merge(v.merge({},q.prototype._defaultAttrValues),{width:"100%",height:"100%",x:"0",y:"0",preserveAspectRatio:"xMidYMid meet"}),width:function(t){return this._setAttrGetterSetter("width",t)},height:function(t){return this._setAttrGetterSetter("height",t)},x:function(t){return this._setAttrGetterSetter("x",t)},y:function(t){return this._setAttrGetterSetter("y",t)},size:function(t,e){return void 0===t&&void 0===e?{width:this.width(),height:this.height()}:(void 0!==t&&this.width(t),void 0!==e&&this.height(e),this)},viewBox:function(t,e,n,r){var i,o,l,s=this._getViewBoxDefValue();return void 0===t&&void 0===e&&void 0===n&&void 0===r?null===(l=this.attr("viewBox"))?s:(i=(l=l.trim()).split(y.tokenSeparator)).length<4?s:(t=+(t=i[0]),e=+(e=i[1]),n=+(n=i[2]),r=+(r=i[3]),isFinite(t)&&isFinite(e)&&isFinite(n)&&n>=0&&isFinite(r)&&r>=0?{x:t,y:e,width:n,height:r}:s):(p(t)&&(t=(i=t).x,e=i.y,n=i.width,r=i.height),o=this.viewBox(),void 0===t&&(t=o.x),void 0===e&&(e=o.y),void 0===n&&(n=o.width),void 0===r&&(r=o.height),l=(t=+t)+" "+(e=+e)+" "+(n=+n)+" "+(r=+r),this.attr("viewBox",l),this)},_getViewBoxDefValue:function(){var t,e,n=parseFloat(this._defaultAttrValues.width),r=parseFloat(this._defaultAttrValues.height);return t=this.width(),e=this.height(),t=parseFloat(t),e=parseFloat(e),isFinite(t)&&t>=0||(t=n),isFinite(e)&&e>=0||(e=r),{x:0,y:0,width:t,height:e}},aspectRatio:function(t){return this._setAttrGetterSetter("preserveAspectRatio",t)}}),w.makeInheritance(q),b.makeInheritance(q);var Y=v.SVGDoc=function(t,e,n){var r=q.call(this,void 0,void 0,void 0,void 0,n),i={width:t,height:e};if(r)return r.attr(i,null),r._setup(),r;this.attr(i,null),this._setup()};d(Y,q),Y.prototype=Object.create(q.prototype),Y.prototype.constructor=Y,v.merge(Y,{domInterface:l.SVGSVGElement}),v.merge(Y.prototype,{tag:"svg",_defaultAttrValues:v.merge(v.merge({},Y.prototype._defaultAttrValues),{width:"100%",height:"100%"}),_setup:function(){var t=this._domElement;v.setAttribute(t,"version","1.1",null),t.setAttribute("xmlns",v.ns.svg),v.setAttribute(t,"xmlns:xlink",v.ns.xlink,v.ns.xml),this.defs()},container:function(t){if(t instanceof l.HTMLElement)t.appendChild(this._domElement);else if("string"==typeof t)return this.container(s.getElementById(t));return this},defs:function(){var t=this._getDefsElement();return t||this._createDefsElement()},_getDefsElement:function(){for(var t=this.children(),e=t.length,n=0;n<e;++n)if(t[n].node()instanceof l.SVGDefsElement)return new X(t[n].node());return null},_createDefsElement:function(){var t=new X;return this.append(t),t}});var $=v.G=function(t){var e=k.call(this,t);if(e)return e};d($,k),$.prototype=Object.create(k.prototype),$.prototype.constructor=$,v.merge($,{domInterface:l.SVGGElement}),v.merge($.prototype,{tag:"g",_defaultAttrValues:v.merge(v.merge({},$.prototype._defaultAttrValues),{})}),w.makeInheritance($),b.makeInheritance($);var X=v.Defs=function(t){var e=k.call(this,t);if(e)return e};d(X,k),X.prototype=Object.create(k.prototype),X.prototype.constructor=X,v.merge(X,{domInterface:l.SVGDefsElement}),v.merge(X.prototype,{tag:"defs",_defaultAttrValues:v.merge(v.merge({},X.prototype._defaultAttrValues),{})}),w.makeInheritance(X),b.makeInheritance(X);var J=v.Symbol=function(t){var e=A.call(this,t);if(e)return e};d(J,A),J.prototype=Object.create(A.prototype),J.prototype.constructor=J,v.merge(J,{domInterface:l.SVGSymbolElement}),v.merge(J.prototype,{tag:"symbol",_defaultAttrValues:v.merge(v.merge({},J.prototype._defaultAttrValues),{preserveAspectRatio:"xMidYMid meet"}),viewBox:function(t){return this._setAttrGetterSetter("viewBox",t)},aspectRatio:function(t){return this._setAttrGetterSetter("preserveAspectRatio",t)}}),w.makeInheritance(J),b.makeInheritance(J);var Q=v.Use=function(t,e,n,r,i,o){var l=k.call(this,o),s={width:e,height:n,x:r,y:i};if(l)return l.attr(s,null),l.href(t),l;this.attr(s,null),this.href(t)};return d(Q,k),Q.prototype=Object.create(k.prototype),Q.prototype.constructor=Q,v.merge(Q,{domInterface:l.SVGUseElement}),v.merge(Q.prototype,{tag:"use",_defaultAttrValues:v.merge(v.merge({},Q.prototype._defaultAttrValues),{x:"0",y:"0",width:"0",height:"0",href:""}),width:function(t){return this._setAttrGetterSetter("width",t)},height:function(t){return this._setAttrGetterSetter("height",t)},x:function(t){return this._setAttrGetterSetter("x",t)},y:function(t){return this._setAttrGetterSetter("y",t)},href:function(t){var e;return void 0===t?this.attr(["href"],v.ns.xlink).href:null===t?this.attr("href",null,v.ns.xlink):(e=t instanceof A?"#"+t.id():String(t),this.attr("href",e,v.ns.xlink))}}),v.merge(A.prototype,{binder:function(t,e){if(null===t)return this._binder=null,this;if(!f(t))throw new TypeError("Binder must be a callable");return e=c(e)?this:e,this._binder=t.bind(e),this},bind:function(t){var e=this._binder;return f(e)?(e(t),this):this}}),v});