!function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e):e.Vector=t(e)}("undefined"!=typeof window?window:this,function(e){"use strict";Object.defineProperty;var t=Object.defineProperties,n=Array.prototype.slice,r=(Array.prototype.splice,Math.max,Math.min,Object.create),o=function(e){return void 0===e||null===e},l=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)},i=function(e){return"function"==typeof e},s=function(e,t){if(void 0===e||null===e)throw new TypeError("setPrototypeOf called on null or undefined");if(null!==t&&!l(t))throw new TypeError("Object prototype may only be an Object or null: "+String(t));var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(void 0===n||!i(n.set))throw new TypeError("Object.prototype.__proto__ accessor property does not exist");return n.set.call(e,t),e},u=function(){var e=window.navigator.userAgent;return/MSIE/i.test(e)||/rv:11\.0/i.test(e)||/Edge/i.test(e)},h=function(e){};h.merge=function(e){if(o(e))throw new TypeError("Target object can't be null or undefined");e=Object(e);var n,r,l;for(n=1;n<arguments.length;++n)r=arguments[n],o(r)||(r=Object(r),l=Object.getOwnPropertyNames(r).reduce(function(e,t){return e[t]=Object.getOwnPropertyDescriptor(r,t),e},{}),t(e,l));return e};var c=h.Element=function(){this._domElement=null,this._events={}};h.merge(c.prototype,{byId:function(){},query:function(){},queryAll:function(){}}),h.merge(c.prototype,{on:function(e,t,r,o){if(null===this._domElement)return this;if(!i(t))throw new TypeError("EventListener is not callable");e=String(e),o=Boolean(o),r=arguments.length>=3?r:this;var l,s,u=this,h=0;if(l=this._events[e],s=function(){t.apply(r,n.call(arguments))},l){for(;h<l.length;++h)if(l[h].listener===t&&l[h].useCapture===o)return this}else l=this._events[e]=[];return l.push({listener:t,wrapperListener:s,useCapture:o}),this._domElement.addEventListener?this._domElement.addEventListener(e,s,o):this._domElement.attachEvent("on"+e,s),u},off:function(e,t,n){if(null===this._domElement)return this;var r=this._events,o=this;if(0===arguments.length)Object.keys(r).forEach(function(e){r[e].forEach(function(t){o._domElement.removeEventListener?o._domElement.removeEventListener(e,t.wrapperListener,t.useCapture):o._domElement.detachEvent("on"+e,t.wrapperListener)})}),this._events={};else if(1===arguments.length){if(e=String(e),!r[e])return o;r[e].forEach(function(t){o._domElement.removeEventListener?o._domElement.removeEventListener(e,t.wrapperListener,t.useCapture):o._domElement.detachEvent("on"+e,t.wrapperListener)}),delete r[e]}else{if(!i(t))throw new TypeError("EventListener is not callable");e=String(e),n=Boolean(n);var l,s=0;if(!(l=this._events[e]))return o;for(;s<l.length;++s)if(l[s].listener===t&&l[s].useCapture===n){o._domElement.removeEventListener?o._domElement.removeEventListener(e,l[s].wrapperListener,l[s].useCapture):o._domElement.detachEvent("on"+e,l[s].wrapperListener),l.splice(s,1);break}0===l.length&&delete r[e]}return o},once:function(e,t,r,o){if(null===this._domElement)return this;if(!i(t))throw new TypeError("EventListener is not callable");e=String(e),o=Boolean(o),r=arguments.length>=3?r:this;var l,s,u=this,h=0;if(l=this._events[e],s=function(){t.apply(r,n.call(arguments)),u.off(e,t,o)},l){for(;h<l.length;++h)if(l[h].listener===t&&l[h].useCapture===o)return this}else l=this._events[e]=[];return l.push({listener:t,wrapperListener:s,useCapture:o}),this._domElement.addEventListener?this._domElement.addEventListener(e,s,o):this._domElement.attachEvent("on"+e,s),u},emit:function(e,t,n){if(null===this._domElement)return this;e=String(e),n=Boolean(n);var r;return i(window.CustomEvent)?r=new window.CustomEvent(e,{detail:t,bubbles:n,cancelable:!0}):i(document.createEvent)?(r=document.createEvent("CustomEvent")).initCustomEvent(e,n,!0,t):(r=document.createEventObject()).detail=t,i(this._domElement.dispatchEvent)?this._domElement.dispatchEvent(r):this._domElement.fireEvent("on"+e,r),this},focus:function(){if(null===this._domElement)return this;this._domElement.focus()},blur:function(){if(null===this._domElement)return this;this._domElement.blur()},focusin:function(){if(null===this._domElement)return this;this._domElement.focus()},focuseout:function(){if(null===this._domElement)return this;this._domElement.blur()},click:function(){return null===this._domElement?this:(m(this,"click"),this)},dblclick:function(){return null===this._domElement?this:(m(this,"dblclick"),this)},mousedown:function(){return null===this._domElement?this:(m(this,"mousedown"),this)},mouseup:function(){return null===this._domElement?this:(m(this,"mouseup"),this)},mousemove:function(){return null===this._domElement?this:(m(this,"mousemove"),this)},mouseout:function(){return null===this._domElement?this:(m(this,"mouseout"),this)},mouseover:function(){return null===this._domElement?this:(m(this,"mouseover"),this)},mouseenter:function(){return null===this._domElement?this:(m(this,"mouseenter"),this)},mouseleave:function(){return null===this._domElement?this:(m(this,"mouseleave"),this)},keydown:function(){return null===this._domElement?this:(d(this,"keydown"),this)},keypress:function(){return null===this._domElement?this:(d(this,"keypress"),this)},keyup:function(){return null===this._domElement?this:(d(this,"keyup"),this)},onclick:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onclick",e,t)},ondblclick:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondblclick",e,t)},onmousedown:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmousedown",e,t)},onmousemove:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmousemove",e,t)},onmouseout:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmouseout",e,t)},onmouseover:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmouseover",e,t)},onmouseup:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmouseup",e,t)},onmouseenter:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmouseenter",e,t)},onmouseleave:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onmouseleave",e,t)},ontouchstart:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ontouchstart",e,t)},ontouchend:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ontouchend",e,t)},ontouchmove:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ontouchmove",e,t)},ontouchcancel:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ontouchcancel",e,t)},ondrag:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondrag",e,t)},ondragend:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondragend",e,t)},ondragenter:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondragenter",e,t)},ondragleave:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondragleave",e,t)},ondragover:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondragover",e,t)},ondragstart:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"oondragstart",e,t)},ondrop:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"ondrop",e,t)},onblur:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onblur",e,t)},onfocus:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onfocus",e,t)},oncontextmenu:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"oncontextmenu",e,t)},onkeydown:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onkeydown",e,t)},onkeypress:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onkeypress",e,t)},onkeyup:function(e,t){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,E(this,"onkeyup",e,t)}});var a=function(e){var t;return i(window.MouseEvent)?t=new window.MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,buttons:0,relatedTarget:null,region:null}):i(document.createEvent)?(t=document.createEvent("MouseEvent")).initMouseEvent(e,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):t=document.createEventObject(),t},m=function(e,t){var n=a(t);i(e._domElement.dispatchEvent)?e._domElement.dispatchEvent(n):e._domElement.fireEvent("on"+t,n)},f=function(e){var t;return i(window.KeyboardEvent)?t=new window.KeyboardEvent(e,{bubbles:!0,cancelable:!0,view:window,detail:0,key:"",code:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,repeat:!1,isComposing:!1,charCode:0,keyCode:0,which:0}):document.createEvent?(t=document.createEvent("KeyboardEvent"),i(t.initKeyboardEvent)?u()?t.initKeyboardEvent(e,!0,!0,window,"",0,"",!1,""):t.initKeyboardEvent(e,!0,!0,window):t.initKeyEvent(e,!0,!0,window,!1,!1,!1,!1,0,0)):t=document.createEventObject(),t},d=function(e,t){var n=f(t);i(e._domElement.dispatchEvent)?e._domElement.dispatchEvent(n):e._domElement.fireEvent("on"+t,n)},E=function(e,t,n,r){var o;return null===n?(e._domElement[t]=null,e):i(n)?(o=n.bind(r),o._listener=n,e._domElement[t]=o,e):(o=e._domElement[t],i(o)&&i(o._listener)?o._listener:null)},p=h.Graphics=function(){c.apply(this,n.call(arguments))};s(p,c),p.prototype=r(c.prototype),p.prototype.constructor=p;var w=h.Geometry=function(){p.apply(this,n.call(arguments))};s(w,p),w.prototype=r(p.prototype),w.prototype.constructor=w;h.Rect=function(e,t,n,r,o,l){w.apply(this,[])};return h});