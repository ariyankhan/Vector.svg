!function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e):e.Vector=t(e)}("undefined"!=typeof window?window:this,function(e){"use strict";Object.defineProperty,Object.defineProperties;var t=Array.prototype.slice,n=(Array.prototype.splice,Math.max,Math.min,Object.create),o=function(e){return void 0===e||null===e},r=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)},i=function(e){return"function"==typeof e},s=function(e,t){if(void 0===e||null===e)throw new TypeError("setPrototypeOf called on null or undefined");if(null!==t&&!r(t))throw new TypeError("Object prototype may only be an Object or null: "+String(t));var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(void 0===n||!i(n.set))throw new TypeError("Object.prototype.__proto__ accessor property does not exist");return n.set.call(e,t),e},l=function(){var e=window.navigator.userAgent;return/MSIE/i.test(e)||/rv:11\.0/i.test(e)||/Edge/i.test(e)},u=function(e){};u.merge=function(e){if(o(e))throw new TypeError("Target object can't be null or undefined");e=Object(e);var t,n,r;for(t=1;t<arguments.length;++t)n=arguments[t],o(n)||(n=Object(n),r=Object.getOwnPropertyNames(n).reduce(function(e,t){return e[t]=Object.getOwnPropertyDescriptor(n,t),e},{}),Object.defineProperties(e,r));return e};var c=u.Element=function(){this._domElement=null,this._events={}};u.merge(c.prototype,{on:function(e,n,o){if(null===this._domElement)return this;if(!i(n))throw new TypeError("EventListener is not callable");e=String(e),o=Boolean(o);var r,s,l=this,u=0;if(r=this._events[e],s=function(){n.apply(l,t.call(arguments))},r){for(;u<r.length;++u)if(r[u].listener===n&&r[u].useCapture===o)return this}else r=this._events[e]=[];return r.push({listener:n,wrapperListener:s,useCapture:o}),this._domElement.addEventListener?this._domElement.addEventListener(e,s,o):this._domElement.attachEvent("on"+e,s),l},off:function(e,t,n){if(null===this._domElement)return this;var o=this._events,r=this;if(0===arguments.length)Object.keys(o).forEach(function(e){o[e].forEach(function(t){r._domElement.removeEventListener?r._domElement.removeEventListener(e,t.wrapperListener,t.useCapture):r._domElement.detachEvent("on"+e,t.wrapperListener)})}),this._events={};else if(1===arguments.length){if(e=String(e),!o[e])return r;o[e].forEach(function(t){r._domElement.removeEventListener?r._domElement.removeEventListener(e,t.wrapperListener,t.useCapture):r._domElement.detachEvent("on"+e,t.wrapperListener)}),delete o[e]}else{if(!i(t))throw new TypeError("EventListener is not callable");e=String(e),n=Boolean(n);var s,l=0;if(!(s=this._events[e]))return r;for(;l<s.length;++l)if(s[l].listener===t&&s[l].useCapture===n){r._domElement.removeEventListener?r._domElement.removeEventListener(e,s[l].wrapperListener,s[l].useCapture):r._domElement.detachEvent("on"+e,s[l].wrapperListener),s.splice(l,1);break}0===s.length&&delete o[e]}return r},once:function(e,n,o){if(null===this._domElement)return this;if(!i(n))throw new TypeError("EventListener is not callable");e=String(e),o=Boolean(o);var r,s,l=this,u=0;if(r=this._events[e],s=function(){n.apply(l,t.call(arguments)),l.off(e,n,o)},r){for(;u<r.length;++u)if(r[u].listener===n&&r[u].useCapture===o)return this}else r=this._events[e]=[];return r.push({listener:n,wrapperListener:s,useCapture:o}),this._domElement.addEventListener?this._domElement.addEventListener(e,s,o):this._domElement.attachEvent("on"+e,s),l},emit:function(e,t,n){if(null===this._domElement)return this;e=String(e),n=Boolean(n);var o;return i(window.CustomEvent)?o=new window.CustomEvent(e,{detail:t,bubbles:n,cancelable:!0}):i(document.createEvent)?(o=document.createEvent("CustomEvent")).initCustomEvent(e,n,!0,t):(o=document.createEventObject()).detail=t,i(this._domElement.dispatchEvent)?this._domElement.dispatchEvent(o):this._domElement.fireEvent("on"+e,o),this},focus:function(){if(null===this._domElement)return this;this._domElement.focus()},blur:function(){if(null===this._domElement)return this;this._domElement.blur()},focusin:function(){if(null===this._domElement)return this;this._domElement.focus()},focuseout:function(){if(null===this._domElement)return this;this._domElement.blur()},click:function(){return null===this._domElement?this:(d(this,"click"),this)},dblclick:function(){return null===this._domElement?this:(d(this,"dblclick"),this)},mousedown:function(){return null===this._domElement?this:(d(this,"mousedown"),this)},mouseup:function(){return null===this._domElement?this:(d(this,"mouseup"),this)},mousemove:function(){return null===this._domElement?this:(d(this,"mousemove"),this)},mouseout:function(){return null===this._domElement?this:(d(this,"mouseout"),this)},mouseover:function(){return null===this._domElement?this:(d(this,"mouseover"),this)},mouseenter:function(){return null===this._domElement?this:(d(this,"mouseenter"),this)},mouseleave:function(){return null===this._domElement?this:(d(this,"mouseleave"),this)},keydown:function(){return null===this._domElement?this:(a(this,"keydown"),this)},keypress:function(){return null===this._domElement?this:(a(this,"keypress"),this)},keyup:function(){return null===this._domElement?this:(a(this,"keyup"),this)},onclick:function(e){if(arguments.length>=1&&null!==e&&!i(e))throw new TypeError("Listener is not null or callable");return E(this,"onclick",e)}});var m=function(e){var t;return i(window.MouseEvent)?t=new window.MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,buttons:0,relatedTarget:null,region:null}):i(document.createEvent)?(t=document.createEvent("MouseEvent")).initMouseEvent(e,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):t=document.createEventObject(),t},d=function(e,t){var n=m(t);i(e._domElement.dispatchEvent)?e._domElement.dispatchEvent(n):e._domElement.fireEvent("on"+t,n)},h=function(e){var t;return i(window.KeyboardEvent)?t=new window.KeyboardEvent(e,{bubbles:!0,cancelable:!0,view:window,detail:0,key:"",code:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,repeat:!1,isComposing:!1,charCode:0,keyCode:0,which:0}):document.createEvent?(t=document.createEvent("KeyboardEvent"),i(t.initKeyboardEvent)?l()?t.initKeyboardEvent(e,!0,!0,window,"",0,"",!1,""):t.initKeyboardEvent(e,!0,!0,window):t.initKeyEvent(e,!0,!0,window,!1,!1,!1,!1,0,0)):t=document.createEventObject(),t},a=function(e,t){var n=h(t);i(e._domElement.dispatchEvent)?e._domElement.dispatchEvent(n):e._domElement.fireEvent("on"+t,n)},E=function(e,t,n){var o;return null===n?(e._domElement[t]=null,e):i(n)?(o=n.bind(e),o._listener=n,e._domElement[t]=o,e):(o=e._domElement[t],i(o)&&i(o._listener)?o._listener:null)},f=u.Graphics=function(){c.apply(this,t.call(arguments))};s(f,c),f.prototype=n(c.prototype),f.prototype.constructor=f;var p=u.Geometry=function(){f.apply(this,t.call(arguments))};return s(p,f),p.prototype=n(f.prototype),p.prototype.constructor=p,u});