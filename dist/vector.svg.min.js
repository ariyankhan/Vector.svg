!function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e):e.Vector=t(e)}("undefined"!=typeof window?window:this,function(e){"use strict";Object.defineProperty;var t=Object.defineProperties,n=Array.prototype.slice,r=(Array.prototype.splice,Math.max,Math.min,Object.create),o=function(e){return void 0===e||null===e},i=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)},l=function(e){return"function"==typeof e},s=function(e,t){if(void 0===e||null===e)throw new TypeError("setPrototypeOf called on null or undefined");if(null!==t&&!i(t))throw new TypeError("Object prototype may only be an Object or null: "+String(t));var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(void 0===n||!l(n.set))throw new TypeError("Object.prototype.__proto__ accessor property does not exist");return n.set.call(e,t),e},u=function(){var e=window.navigator.userAgent;return/MSIE/i.test(e)||/rv:11\.0/i.test(e)||/Edge/i.test(e)},h=function(e){};h.merge=function(e){if(o(e))throw new TypeError("Target object can't be null or undefined");e=Object(e);var n,r,i;for(n=1;n<arguments.length;++n)r=arguments[n],o(r)||(r=Object(r),i=Object.getOwnPropertyNames(r).reduce(function(e,t){return e[t]=Object.getOwnPropertyDescriptor(r,t),e},{}),t(e,i));return e},h.merge(h,{ns:{svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",ev:"http://www.w3.org/2001/xml-events",xhtml:"http://www.w3.org/1999/xhtml"},createElement:function(e){return document.createElementNS(h.ns.svg,e)},setAttribute:function(e,t,n,r){return void 0===n?this:(r=o(r)?null:r,e.setAttributeNS(r,t,n),this)},setAttributes:function(e,t,n){return Object.keys(t).forEach(function(r){h.setAttribute(e,r,t[r],n)}),this}});var c=h.Element=function(){this._domElement=null,this._events={}};h.merge(c.prototype,{byId:function(){},query:function(){},queryAll:function(){}}),h.merge(c.prototype,{binder:function(){},bind:function(){}}),h.merge(c.prototype,{on:function(e,t,r,o){if(null===this._domElement)return this;if(!l(t))throw new TypeError("EventListener is not callable");e=String(e),o=Boolean(o),r=arguments.length>=3?r:this;var i,s,u=this,h=0;if(i=this._events[e],s=function(){t.apply(r,n.call(arguments))},i){for(;h<i.length;++h)if(i[h].listener===t&&i[h].useCapture===o)return this}else i=this._events[e]=[];return i.push({listener:t,wrapperListener:s,useCapture:o}),this._domElement.addEventListener?this._domElement.addEventListener(e,s,o):this._domElement.attachEvent("on"+e,s),u},off:function(e,t,n){if(null===this._domElement)return this;var r=this._events,o=this;if(0===arguments.length)Object.keys(r).forEach(function(e){r[e].forEach(function(t){o._domElement.removeEventListener?o._domElement.removeEventListener(e,t.wrapperListener,t.useCapture):o._domElement.detachEvent("on"+e,t.wrapperListener)})}),this._events={};else if(1===arguments.length){if(e=String(e),!r[e])return o;r[e].forEach(function(t){o._domElement.removeEventListener?o._domElement.removeEventListener(e,t.wrapperListener,t.useCapture):o._domElement.detachEvent("on"+e,t.wrapperListener)}),delete r[e]}else{if(!l(t))throw new TypeError("EventListener is not callable");e=String(e),n=Boolean(n);var i,s=0;if(!(i=this._events[e]))return o;for(;s<i.length;++s)if(i[s].listener===t&&i[s].useCapture===n){o._domElement.removeEventListener?o._domElement.removeEventListener(e,i[s].wrapperListener,i[s].useCapture):o._domElement.detachEvent("on"+e,i[s].wrapperListener),i.splice(s,1);break}0===i.length&&delete r[e]}return o},once:function(e,t,r,o){if(null===this._domElement)return this;if(!l(t))throw new TypeError("EventListener is not callable");e=String(e),o=Boolean(o),r=arguments.length>=3?r:this;var i,s,u=this,h=0;if(i=this._events[e],s=function(){t.apply(r,n.call(arguments)),u.off(e,t,o)},i){for(;h<i.length;++h)if(i[h].listener===t&&i[h].useCapture===o)return this}else i=this._events[e]=[];return i.push({listener:t,wrapperListener:s,useCapture:o}),this._domElement.addEventListener?this._domElement.addEventListener(e,s,o):this._domElement.attachEvent("on"+e,s),u},emit:function(e,t,n){if(null===this._domElement)return this;e=String(e),n=Boolean(n);var r;return l(window.CustomEvent)?r=new window.CustomEvent(e,{detail:t,bubbles:n,cancelable:!0}):l(document.createEvent)?(r=document.createEvent("CustomEvent")).initCustomEvent(e,n,!0,t):(r=document.createEventObject()).detail=t,l(this._domElement.dispatchEvent)?this._domElement.dispatchEvent(r):this._domElement.fireEvent("on"+e,r),this},focus:function(){if(null===this._domElement)return this;this._domElement.focus()},blur:function(){if(null===this._domElement)return this;this._domElement.blur()},focusin:function(){if(null===this._domElement)return this;this._domElement.focus()},focuseout:function(){if(null===this._domElement)return this;this._domElement.blur()},click:function(){return null===this._domElement?this:(m(this,"click"),this)},dblclick:function(){return null===this._domElement?this:(m(this,"dblclick"),this)},mousedown:function(){return null===this._domElement?this:(m(this,"mousedown"),this)},mouseup:function(){return null===this._domElement?this:(m(this,"mouseup"),this)},mousemove:function(){return null===this._domElement?this:(m(this,"mousemove"),this)},mouseout:function(){return null===this._domElement?this:(m(this,"mouseout"),this)},mouseover:function(){return null===this._domElement?this:(m(this,"mouseover"),this)},mouseenter:function(){return null===this._domElement?this:(m(this,"mouseenter"),this)},mouseleave:function(){return null===this._domElement?this:(m(this,"mouseleave"),this)},keydown:function(){return null===this._domElement?this:(d(this,"keydown"),this)},keypress:function(){return null===this._domElement?this:(d(this,"keypress"),this)},keyup:function(){return null===this._domElement?this:(d(this,"keyup"),this)},onclick:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onclick",e,t)},ondblclick:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ondblclick",e,t)},onmousedown:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onmousedown",e,t)},onmousemove:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onmousemove",e,t)},onmouseout:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onmouseout",e,t)},onmouseover:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onmouseover",e,t)},onmouseup:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onmouseup",e,t)},onmouseenter:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onmouseenter",e,t)},onmouseleave:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onmouseleave",e,t)},ontouchstart:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ontouchstart",e,t)},ontouchend:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ontouchend",e,t)},ontouchmove:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ontouchmove",e,t)},ontouchcancel:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ontouchcancel",e,t)},ondrag:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ondrag",e,t)},ondragend:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ondragend",e,t)},ondragenter:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ondragenter",e,t)},ondragleave:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ondragleave",e,t)},ondragover:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ondragover",e,t)},ondragstart:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"oondragstart",e,t)},ondrop:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"ondrop",e,t)},onblur:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onblur",e,t)},onfocus:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onfocus",e,t)},oncontextmenu:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"oncontextmenu",e,t)},onkeydown:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onkeydown",e,t)},onkeypress:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onkeypress",e,t)},onkeyup:function(e,t){if(arguments.length>=1&&null!==e&&!l(e))throw new TypeError("Listener is not null or callable");return t=arguments.length>=2?t:this,p(this,"onkeyup",e,t)}});var a=function(e){var t;return l(window.MouseEvent)?t=new window.MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,buttons:0,relatedTarget:null,region:null}):l(document.createEvent)?(t=document.createEvent("MouseEvent")).initMouseEvent(e,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):t=document.createEventObject(),t},m=function(e,t){var n=a(t);l(e._domElement.dispatchEvent)?e._domElement.dispatchEvent(n):e._domElement.fireEvent("on"+t,n)},f=function(e){var t;return l(window.KeyboardEvent)?t=new window.KeyboardEvent(e,{bubbles:!0,cancelable:!0,view:window,detail:0,key:"",code:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,repeat:!1,isComposing:!1,charCode:0,keyCode:0,which:0}):document.createEvent?(t=document.createEvent("KeyboardEvent"),l(t.initKeyboardEvent)?u()?t.initKeyboardEvent(e,!0,!0,window,"",0,"",!1,""):t.initKeyboardEvent(e,!0,!0,window):t.initKeyEvent(e,!0,!0,window,!1,!1,!1,!1,0,0)):t=document.createEventObject(),t},d=function(e,t){var n=f(t);l(e._domElement.dispatchEvent)?e._domElement.dispatchEvent(n):e._domElement.fireEvent("on"+t,n)},p=function(e,t,n,r){var o;return null===n?(e._domElement[t]=null,e):l(n)?(o=n.bind(r),o._listener=n,e._domElement[t]=o,e):(o=e._domElement[t],l(o)&&l(o._listener)?o._listener:null)},E=h.Graphics=function(){c.apply(this,n.call(arguments))};s(E,c),E.prototype=r(c.prototype),E.prototype.constructor=E;var w=h.Geometry=function(){E.apply(this,n.call(arguments))};s(w,E),w.prototype=r(E.prototype),w.prototype.constructor=w;var v=h.Rect=function(e,t,n,r,o,i){w.apply(this,[]);var l=h.createElement(this.tag);h.setAttributes(l,{width:e,height:t,x:n,y:r,rx:o,ry:i},null),this._domElement=l,l._wrapElement=this};return s(v,w),v.prototype=Object.create(w.prototype),v.prototype.constructor=v,h.merge(v.prototype,{tag:"rect"}),h});